(this["webpackJsonpreact-transliterate-example"]=this["webpackJsonpreact-transliterate-example"]||[]).push([[0],{18:function(e,t,n){"use strict";n.r(t);n(9);var a=n(0),r=n(5),o=n.n(r),s=n(1),i=n(6),c=n.n(i);const l={KEY_RETURN:"Enter",KEY_ENTER:"Enter",KEY_TAB:"Tab",KEY_SPACE:" "},d=async()=>{if(sessionStorage.getItem("indic_transliterate__supported_languages"))return JSON.parse(sessionStorage.getItem("indic_transliterate__supported_languages")||"");{const t="".concat("https://xlit-api.ai4bharat.org/","languages");(new Headers).append("Content-Type","application/json");const n={method:"GET"};try{const e=await fetch(t,n),a=await e.json();return sessionStorage.setItem("indic_transliterate__supported_languages",JSON.stringify(a)),a}catch(e){return console.error("There was an error with transliteration",e),[]}}},u=e=>{let{renderComponent:t=(e=>Object(s.jsx)("input",{...e})),lang:n="hi",offsetX:r=0,offsetY:o=10,onChange:i,onChangeText:u,onBlur:g,value:p,onKeyDown:h,containerClassName:f="",containerStyles:b={},activeItemStyles:j={},maxOptions:m=5,hideSuggestionBoxOnMobileDevices:x=!1,hideSuggestionBoxBreakpoint:v=450,triggerKeys:O=[l.KEY_SPACE,l.KEY_ENTER,l.KEY_RETURN,l.KEY_TAB],insertCurrentSelectionOnBlur:w=!0,showCurrentWordAsLastSuggestion:S=!0,enabled:y=!0,options:C=[],setOptions:E,setSelected:k,...T}=e;const[_,I]=Object(a.useState)(0),[N,A]=Object(a.useState)(0),[R,K]=Object(a.useState)(0),[B,L]=Object(a.useState)(-1),[D,F]=Object(a.useState)(-1),U=Object(a.useRef)(null),[W,Y]=Object(a.useState)({width:0,height:0}),[z,M]=Object(a.useState)("ltr"),[J,G]=Object(a.useState)(null),H=Object(a.useMemo)((()=>!x||W.width>v),[W,v,x]),P=()=>{K(0),E([])},Q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";var n;const a=p;console.log(e),k(C[e]);const r=a.substring(0,B)+C[e]+" "+a.substring(D+1,a.length);setTimeout((()=>{var n,a;n=U.current,a="Enter"===t?B+C[e].length:B+C[e].length+1,n&&(n.selectionStart?(n.focus(),n.setSelectionRange(a,a)):n.focus())}),1);const o={target:{value:r}};return u(r),i&&i(o),P(),null===(n=U.current)||void 0===n?void 0:n.focus()},Z=async e=>{if(!H)return;const t=S?m-1:m,a=await(async(e,t)=>{const{showCurrentWordAsLastSuggestion:n,lang:a}=t||{numOptions:5,showCurrentWordAsLastSuggestion:!0,lang:"hi"};"."!=e&&".."!=e||(e=" "+e);const r={input:[{source:e=encodeURIComponent(e)}],config:{serviceId:"ai4bharat/indicxlit--gpu-t4",language:{sourceLanguage:"en",sourceScriptCode:"",targetLanguage:a,targetScriptCode:""},isSentence:!1,numSuggestions:5},controlConfig:{dataTracking:!0}};try{const t=await fetch("https://api.dhruva.ekstep.ai/services/inference/transliteration",{method:"post",body:JSON.stringify(r),mode:"cors",headers:new Headers({"Content-Type":"application/json",Authorization:"uOQOvZAkdKQpaeZa5-K03k9SIXOtZFEIkdj995-lTz_bozcijCNgVye2jEGIRFQG"})}).then((e=>e.json()));console.log("library data",t);const a=t.output[0];return a&&a.target.length>0?n?[...a.target,e]:a.target:n?[e]:[]}catch(o){return console.error("There was an error with transliteration",o),[]}})(e,{numOptions:t,showCurrentWordAsLastSuggestion:S,lang:n});E(null!==a&&void 0!==a?a:[])},X=()=>{const e=window.innerWidth,t=window.innerHeight;Y({width:e,height:t})};return Object(a.useEffect)((()=>{window.addEventListener("resize",X);const e=window.innerWidth,t=window.innerHeight;return Y({width:e,height:t}),()=>{window.removeEventListener("resize",X)}}),[]),Object(a.useEffect)((()=>{(async e=>{const t=await d(),n=null===t||void 0===t?void 0:t.find((t=>t.LangCode===e));var a;return[null!==(a=null===n||void 0===n?void 0:n.Direction)&&void 0!==a?a:"ltr",null===n||void 0===n?void 0:n.GoogleFont,null===n||void 0===n?void 0:n.FallbackFont]})(n).then((e=>{let[t,n,a]=e;if(M(t),n){if(!document.getElementById("font-".concat(n))){const e=document.createElement("link");e.id="font-".concat(n),e.href="https://fonts.googleapis.com/css?family=".concat(n),e.rel="stylesheet",document.head.appendChild(e)}G("".concat(n,", ").concat(null!==a&&void 0!==a?a:"sans-serif"))}else G(null)}))}),[n]),Object(s.jsxs)("div",{style:{...b,position:"relative"},className:f,children:[t({onChange:e=>{const t=e.currentTarget.value;if(i&&i(e),u(t),!H)return;const n=(a=e.target,a&&"number"===typeof a.selectionStart&&"number"===typeof a.selectionEnd?{start:a.selectionStart,end:a.selectionEnd}:{start:0,end:0}).end;var a;const r=U.current;if(!r)return;const o=c()(r,n),s=t.lastIndexOf(" ",n-1)<t.lastIndexOf("\n",n-1)?t.lastIndexOf("\n",n-1):t.lastIndexOf(" ",n-1);L(s+1),F(n-1);const l=t.slice(s+1,n);if(l&&y){Z(l);const e=r.getBoundingClientRect(),t=Math.min(o.left,e.width-50),n=Math.min(o.top+10,e.height);A(n),I(t)}else P()},onKeyDown:e=>{if(C.length>0)if(O.includes(e.key))e.preventDefault(),Q(R,e.key);else switch(e.key){case"Escape":e.preventDefault(),P();break;case"ArrowUp":e.preventDefault(),K((C.length+R-1)%C.length);break;case"ArrowDown":e.preventDefault(),K((R+1)%C.length);break;default:h&&h(e)}else h&&h(e)},onBlur:e=>{"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||(w&&C[R]?Q(R):P()),g&&g(e)},ref:U,value:p,"data-testid":"rt-input-component",lang:n,style:{direction:z,...J&&{fontFamily:J}},...T}),H&&C.length>0&&Object(s.jsx)("ul",{style:{backgroundClip:"padding-box",backgroundColor:"#fff",border:"1px solid rgba(0, 0, 0, 0.15)",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.175)",display:"block",fontSize:"14px",listStyle:"none",padding:"1px",textAlign:"left",zIndex:2e4,left:"".concat(_+r,"px"),top:"".concat(N+o,"px"),position:"absolute",width:"auto",...J&&{fontFamily:J}},"data-testid":"rt-suggestions-list",lang:n,children:Array.from(new Set(C)).map(((e,t)=>Object(s.jsx)("li",{style:t===R?{cursor:"pointer",padding:"10px",minWidth:"100px",backgroundColor:"#65c3d7",color:"#fff"}:{cursor:"pointer",padding:"10px",minWidth:"100px",backgroundColor:"#fff"},onMouseEnter:()=>{K(t)},onClick:()=>Q(t),children:decodeURIComponent(e)},decodeURIComponent(e))))})]})};var g=n(33);var p=()=>{const[e,t]=Object(a.useState)(""),[n,r]=Object(a.useState)(),[o,i]=Object(a.useState)("hi");return Object(a.useEffect)((()=>{d().then((e=>r(e)))}),[]),Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("h2",{children:"Indic transliterate"}),Object(s.jsx)("select",{className:"language-dropdown",value:o,onChange:e=>i(e.target.value),children:null===n||void 0===n?void 0:n.map((e=>Object(s.jsx)("option",{value:e.LangCode,children:e.DisplayName},e.LangCode)))}),Object(s.jsx)("div",{className:"spacer"}),Object(s.jsx)("label",{htmlFor:"react-transliterate-input",children:"Using input"}),Object(s.jsx)(u,{value:e,onChangeText:e=>{t(e)},lang:o,placeholder:"Start typing here...",id:"react-transliterate-input"}),Object(s.jsx)("div",{className:"spacer"}),Object(s.jsx)("label",{htmlFor:"react-transliterate-textarea",children:"Using textarea"}),Object(s.jsx)(u,{renderComponent:e=>Object(s.jsx)("textarea",{...e}),value:e,onChangeText:e=>{t(e)},lang:o,placeholder:"Start typing here...",id:"react-transliterate-textarea"}),Object(s.jsx)("div",{className:"spacer"}),Object(s.jsx)("label",{htmlFor:"react-transliterate-material-ui-input",children:"Using Material UI input"}),Object(s.jsx)(u,{renderComponent:e=>{const t=e.ref;return delete e.ref,Object(s.jsx)(g.a,{fullWidth:!0,...e,inputRef:t})},value:e,onChangeText:e=>{t(e)},lang:o,placeholder:"Start typing here...",id:"react-transliterate-material-ui-input"})]})};o.a.render(Object(s.jsx)(p,{}),document.getElementById("root"))},9:function(e,t,n){}},[[18,1,2]]]);
//# sourceMappingURL=main.5f686457.chunk.js.map