(this["webpackJsonpreact-transliterate-example"]=this["webpackJsonpreact-transliterate-example"]||[]).push([[0],{18:function(e,t,n){"use strict";n.r(t);n(9);var a=n(0),r=n(5),s=n.n(r),o=n(1),i=n(6),l=n.n(i);const c={KEY_RETURN:"Enter",KEY_ENTER:"Enter",KEY_TAB:"Tab",KEY_SPACE:" "},u="https://xlit-api.ai4bharat.org/",d=async()=>{if(sessionStorage.getItem("indic_transliterate__supported_languages"))return JSON.parse(sessionStorage.getItem("indic_transliterate__supported_languages")||"");{const t="".concat(u,"languages");(new Headers).append("Content-Type","application/json");const n={method:"GET"};try{const e=await fetch(t,n),a=await e.json();return sessionStorage.setItem("indic_transliterate__supported_languages",JSON.stringify(a)),a}catch(e){return console.error("There was an error with transliteration",e),[]}}},g=e=>{let{renderComponent:t=(e=>Object(o.jsx)("input",{...e})),lang:n="hi",offsetX:r=0,offsetY:s=10,onChange:i,onChangeText:g,onBlur:h,value:p,onKeyDown:b,containerClassName:f="",containerStyles:j={},activeItemStyles:m={},maxOptions:O=5,hideSuggestionBoxOnMobileDevices:x=!1,hideSuggestionBoxBreakpoint:S=450,triggerKeys:w=[c.KEY_SPACE,c.KEY_ENTER,c.KEY_RETURN,c.KEY_TAB],insertCurrentSelectionOnBlur:v=!0,showCurrentWordAsLastSuggestion:y=!0,enabled:E=!0,horizontalView:C=!1,...k}=e;const[_,T]=Object(a.useState)(0),[I,N]=Object(a.useState)(0),[A,D]=Object(a.useState)(0),[R,B]=Object(a.useState)(-1),[K,L]=Object(a.useState)(-1),M=Object(a.useRef)(null),[W,Y]=Object(a.useState)({width:0,height:0}),[F,U]=Object(a.useState)("ltr"),[z,J]=Object(a.useState)(null),[P,G]=Object(a.useState)([]),[H,V]=Object(a.useState)([]),[X,q]=Object(a.useState)(0),[Q,Z]=Object(a.useState)(Math.random().toString(36).substr(2,9)),[$,ee]=Object(a.useState)(Math.random().toString(36).substr(2,9)),[te,ne]=Object(a.useState)(0),[ae,re]=Object(a.useState)(!0),se=Object(a.useMemo)((()=>!x||W.width>S),[W,S,x]),oe=()=>{D(0),G([])},ie=e=>{var t;const n=p,a=n.substring(0,R)+P[e]+" "+n.substring(K+1,n.length);if(H.length){let t=H[H.length-1],n={keystrokes:t.keystrokes,results:t.results,opted:P[e],created_at:(new Date).toISOString()};V([...H,n]),q(X+1)}setTimeout((()=>{var t,n;t=M.current,n=R+P[e].length+1,t&&(t.selectionStart?(t.focus(),t.setSelectionRange(n,n)):t.focus())}),1);const r={target:{value:a}};return g(a),i&&i(r),oe(),null===(t=M.current)||void 0===t?void 0:t.focus()},le=async(e,t)=>{if(!se)return;const a=y?O-1:O,r=await(async(e,t)=>{const{showCurrentWordAsLastSuggestion:n,lang:a}=t||{numOptions:5,showCurrentWordAsLastSuggestion:!0,lang:"hi"},r={method:"GET"};try{const t=await fetch(u+"tl/".concat(a,"/").concat("."===e||".."===e?" "+e.replace(".","%2E"):encodeURIComponent(e).replace(".","%2E")),r),s=await t.json();return console.log("library data",s),s&&s.result.length>0?n?[...s.result,e]:s.result:n?[e]:[]}catch(s){return console.error("There was an error with transliteration",s),[]}})(e,{numOptions:a,showCurrentWordAsLastSuggestion:y,lang:n});G(null!==r&&void 0!==r?r:[]);let s={keystrokes:t,results:r,opted:"",created_at:(new Date).toISOString()};ae?(re(!1),V([s])):V([...H,s])},ce=()=>{const e=window.innerWidth,t=window.innerHeight;Y({width:e,height:t})};return Object(a.useEffect)((()=>{window.addEventListener("resize",ce);const e=window.innerWidth,t=window.innerHeight;return Y({width:e,height:t}),()=>{window.removeEventListener("resize",ce)}}),[]),Object(a.useEffect)((()=>{(async e=>{const t=await d(),n=null===t||void 0===t?void 0:t.find((t=>t.LangCode===e));var a;return[null!==(a=null===n||void 0===n?void 0:n.Direction)&&void 0!==a?a:"ltr",null===n||void 0===n?void 0:n.GoogleFont,null===n||void 0===n?void 0:n.FallbackFont]})(n).then((e=>{let[t,n,a]=e;if(U(t),n){if(!document.getElementById("font-".concat(n))){const e=document.createElement("link");e.id="font-".concat(n),e.href="https://fonts.googleapis.com/css?family=".concat(n),e.rel="stylesheet",document.head.appendChild(e)}J("".concat(n,", ").concat(null!==a&&void 0!==a?a:"sans-serif"))}else J(null)}))}),[n]),Object(o.jsxs)("div",{style:{...j,position:"relative"},className:f,children:[t({onChange:e=>{const t=e.currentTarget.value;if((0==X||ae)&&(t.length>=4?ne(t.length-4):ne(0)),X>=5){const e={uuid:$,parent_uuid:Q,word:t,source:void 0!=localStorage.getItem("source")?localStorage.getItem("source"):"node-module",language:n,steps:H};V([]),Z($),ee(Math.random().toString(36).substr(2,9)),ne(t.length-2),q(0),re(!0),fetch("https://backend.shoonya.ai4bharat.org/logs/transliteration_selection/",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((async e=>{if(!e.ok)throw await e.json()})).catch((e=>{console.log("error",e)}))}if(i&&i(e),g(t),!se)return;const a=(r=e.target,r&&"number"===typeof r.selectionStart&&"number"===typeof r.selectionEnd?{start:r.selectionStart,end:r.selectionEnd}:{start:0,end:0}).end;var r;const s=M.current;if(!s)return;const o=l()(s,a),c=t.lastIndexOf(" ",a-1)<t.lastIndexOf("\n",a-1)?t.lastIndexOf("\n",a-1):t.lastIndexOf(" ",a-1);B(c+1),L(a-1);const u=t.slice(c+1,a);if(u&&E){0==X||ae?t.length>=4?le(u,t.substr(t.length-4,t.length)):le(u,t.substr(0,t.length)):le(u,t.substr(te,t.length));const e=s.getBoundingClientRect(),n=Math.min(o.left,e.width-50),a=Math.min(o.top+10,e.height);N(a),T(n)}else oe()},onKeyDown:e=>{if(P.length>0)if(w.includes(e.key))e.preventDefault(),ie(A);else switch(e.key){case"Escape":e.preventDefault(),oe();break;case"ArrowUp":case"ArrowLeft":e.preventDefault(),D((P.length+A-1)%P.length);break;case"ArrowDown":case"ArrowRight":e.preventDefault(),D((A+1)%P.length);break;default:b&&b(e)}else b&&b(e)},onBlur:e=>{"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||(v&&P[A]?ie(A):oe()),h&&h(e)},ref:M,value:p,"data-testid":"rt-input-component",lang:n,style:{direction:F,...z&&{fontFamily:z}},...k}),se&&P.length>0&&Object(o.jsx)("ul",{style:{backgroundClip:"padding-box",backgroundColor:"#fff",border:"1px solid rgba(0, 0, 0, 0.15)",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.175)",display:C?"flex":"block",fontSize:"14px",listStyle:"none",padding:"1px",textAlign:"center",zIndex:2e4,left:"".concat(_+r,"px"),top:"".concat(I+s,"px"),position:"absolute",width:"auto",...z&&{fontFamily:z}},"data-testid":"rt-suggestions-list",lang:n,children:Array.from(new Set(P)).map(((e,t)=>Object(o.jsx)("li",{style:t===A?{cursor:"pointer",padding:"10px",minWidth:"100px",backgroundColor:"#65c3d7",color:"#fff"}:{cursor:"pointer",padding:"10px",minWidth:"100px",backgroundColor:"#fff"},onMouseEnter:()=>{D(t)},onClick:()=>ie(t),children:e},e)))})]})};var h=n(33);var p=()=>{const[e,t]=Object(a.useState)(""),[n,r]=Object(a.useState)(),[s,i]=Object(a.useState)("hi");return Object(a.useEffect)((()=>{d().then((e=>r(e)))}),[]),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)("h2",{children:"Indic transliterate"}),Object(o.jsx)("select",{className:"language-dropdown",value:s,onChange:e=>i(e.target.value),children:null===n||void 0===n?void 0:n.map((e=>Object(o.jsx)("option",{value:e.LangCode,children:e.DisplayName},e.LangCode)))}),Object(o.jsx)("div",{className:"spacer"}),Object(o.jsx)("label",{htmlFor:"react-transliterate-input",children:"Using input"}),Object(o.jsx)(g,{value:e,onChangeText:e=>{t(e)},lang:s,placeholder:"Start typing here...",id:"react-transliterate-input"}),Object(o.jsx)("div",{className:"spacer"}),Object(o.jsx)("label",{htmlFor:"react-transliterate-textarea",children:"Using textarea"}),Object(o.jsx)(g,{renderComponent:e=>Object(o.jsx)("textarea",{...e}),value:e,onChangeText:e=>{t(e)},lang:s,placeholder:"Start typing here...",id:"react-transliterate-textarea"}),Object(o.jsx)("div",{className:"spacer"}),Object(o.jsx)("label",{htmlFor:"react-transliterate-material-ui-input",children:"Using Material UI input"}),Object(o.jsx)(g,{renderComponent:e=>{const t=e.ref;return delete e.ref,Object(o.jsx)(h.a,{fullWidth:!0,...e,inputRef:t})},value:e,onChangeText:e=>{t(e)},lang:s,placeholder:"Start typing here...",id:"react-transliterate-material-ui-input"})]})};s.a.render(Object(o.jsx)(p,{}),document.getElementById("root"))},9:function(e,t,n){}},[[18,1,2]]]);
//# sourceMappingURL=main.98133ef0.chunk.js.map